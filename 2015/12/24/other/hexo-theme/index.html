<!DOCTYPE html><html class="no-js"><head><meta charset="utf-8"><title>司马－Simmer - Simmer</title><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/style.css"><!-- detech broser's env --><script src="/js/modernizr.js" type="text/javascript"></script><meta name="description" content="A Blog Powered By Hexo"></head><body><div class="nav nav-show clearfix"><div title="隐藏导航" id="nav-btn" class="nav-guide"><i class="icon nav-icon">&#xe603;</i></div><div class="nav-inner clearfix"><a href="/" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe606;</div><span>Home</span></div></a><a href="/archives" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe602;</div><span>Archives</span></div></a><a href="/categories" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe604;</div><span>Categorys</span></div></a><a href="/tags" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe601;</div><span>Tags</span></div></a><a href="/about" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe605;</div><span>About</span></div></a></div></div><div class="wraper"><div class="main"><section class="content"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2015/12/24/other/hexo-theme/" class="post-title-link">Hexo 定制主题三两事</a></h2><div class="post-subtitle clearfix"><span class="post-date">2015年12月24日</span></div><div class="post-content"><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>记得今年年初的时候开始试着搭建自己的个人博客，当时选择Hexo的原因就是简单，一键部署。很适合我这种什么都不懂的younger FE。如果你不知道什么是Hexo，请看<a href="https://hexo.io/" target="_blank" rel="external">这里</a>。</p>
<p>前端是个变化很快的领域，前几天有幸能够去到杭州参加<a href="http://d2forum.alibaba-inc.com/" target="_blank" rel="external">第十届D2前端交流技术论坛</a>。在大会开场上面，一位阿里巴巴的管理层发言(原谅我忘记了名字T-T)，他说10年前作为一位前端写的代码放到今天已经无法运行(或者说性能低下)，而10年前写的java代码如今还依旧很好的运行在服务器上。从这句话大概就能简单的概述前端，变化很快，新的框架/工具层出不穷。你可以说前端的水不是很深，但是它的水一定足够广。是的，我们已经不再是以前的切图仔了，Node的如日中天和NPM包管理的主流让今天的FE能够有更多的发挥很想象的空间。全栈工程师和全端工程师的’名词’也越来越受到大家的关注，这暗示着前端已经不再局限于浏览器，不再局限于平台。今天我们可以从<code>window</code>这个窗口爬出来，看一看外面精彩缤纷的世界。十多年的发展，前端从刀耕火种到百家齐放。<br><a id="more"></a></p>
<p><a href="https://github.com/cssmagic/blog/issues/52" target="_blank" rel="external">魔法哥－重拾CSS乐趣</a><br><img src="https://cloud.githubusercontent.com/assets/1231359/9245073/859fc014-41d3-11e5-9ba6-65d96a8b795b.jpg" alt="Tools"></p>
<p><a href="http://ued.taobao.org/blog/2014/04/full-stack-development-with-nodejs/" target="_blank" rel="external">淘宝UED前后端分离思考</a><br><img src="http://gtms03.alicdn.com/tps/i3/T1xW8OFrXkXXXK71TW-590-611.png" alt="淘宝UED前后端分离思考"></p>
<p>好像有点跑题了哈，回归主题。。。</p>
<h2 id="hexo-事一-弄清Hexo"><a href="#hexo-事一-弄清Hexo" class="headerlink" title="hexo 事一: 弄清Hexo"></a>hexo 事一: 弄清Hexo</h2><p>A fast, simple &amp; powerful blog framework. － <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a><br>一款快速、简洁且高效的博客框架，这就是Hexo。下面的内容基于Node开发环境，如果你还没安装Node,<a href="https://nodejs.org/en/" target="_blank" rel="external">点击这里</a>进入官网(<a href="http://nodejs.cn/" target="_blank" rel="external">中文网在这里</a>)按照说明进行下载。<br>官网上的快速start教程十分简单:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">npm install hexo-cli -g  // 全局安装hexo-cli 命令行工具</div><div class="line">hexo init blog           // 执行hexo 命令初始化[blog]文件夹</div><div class="line"><span class="built_in">cd</span> blog                  // <span class="built_in">cd</span> 进刚刚通过命令行初始化完成的[blog]文件夹 </div><div class="line">npm install              // 执行npm install 命令 下载package.json中的依赖</div><div class="line">hexo server              // 依赖下载完全，执行hexo 自带的server命令 </div><div class="line">                         // 此刻打开浏览器 输入 `http://localhost:4000/` 查看你的博客吧！</div></pre></td></tr></table></figure></p>
<p><code>npm install hexo-cli -g</code>全局安装hexo的命令行工具，这样的话在任意目录都可以识别并执行相应的hexo命令，也就是你在命令行输入的<code>hexo ***</code>。<br><img src="/images/hexo/hexo-cli.png" alt="Hexo命令行工具"></p>
<h2 id="hexo-事二-Hexo的渲染插件"><a href="#hexo-事二-Hexo的渲染插件" class="headerlink" title="hexo 事二: Hexo的渲染插件"></a>hexo 事二: Hexo的渲染插件</h2><p>我们先来看看都有哪些常用的官方Hexo渲染插件：<br><img src="/images/hexo/hexo-render.png" alt="官方renderer插件"></p>
<h3 id="hexo-renderer-marked"><a href="#hexo-renderer-marked" class="headerlink" title="hexo-renderer-marked"></a>hexo-renderer-marked</h3><p>众所周知，在hexo中我们可以通过markdown来写文章，那么Hexo是如何将我们写好的文章进行渲染的呢？<br>答案就是<a href="https://github.com/hexojs/hexo-renderer-marked" target="_blank" rel="external">hexo-renderer-marked</a> - Markdown renderer for Hexo(Hexo的markdown渲染插件)，它的作用就是把markdown内容渲染然后嵌套到模版中。在模版中我们就可以通过很简单的语法将Markdown-renderer渲染好的内容传递给模版。e.g:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// item means one post</div><div class="line">.post-content</div><div class="line">    != item.content</div></pre></td></tr></table></figure></p>
<p>上面的<code>jade</code>模版将会简单接受<code>hexo-renderer-marked</code>插件渲染好的结果(也就是文章的具体内容)，将它放置于一个<code>calss=&quot;post-content&quot;</code>的div内。<br>编译的结果是:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-content"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- here is the markdown renderer  content --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>是不是和我一样爱上了这种简洁的模版语言？那还等什么 =&gt; =&gt; =&gt; <a href="http://jade-lang.com/" target="_blank" rel="external">jade官方文档传送门</a><br>几乎是瞬间我就喜欢上了这种简洁的语法，它让我们避免面对繁杂的符号而只需要专注于业务逻辑。<br>什么？你不相信？那先来看看<a href="https://github.com/tj/ejs" target="_blank" rel="external">ejs模版</a>(Embedded JavaScript templates for node)是怎么渲染的吧！</p>
<h3 id="hexo-renderer-ejs"><a href="#hexo-renderer-ejs" class="headerlink" title="hexo-renderer-ejs"></a>hexo-renderer-ejs</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// item.title = &quot;hello ejs&quot;</div><div class="line">&lt;div class=&quot;post-content&quot;&gt;</div><div class="line">    &lt;% if(item.title) &#123;%&gt;</div><div class="line">        &lt;h2&gt;(item.title)&lt;/h2&gt;</div><div class="line">    &lt;% &#125;else &#123; %&gt;</div><div class="line">        &lt;h2&gt;(theme.title)&lt;/h2&gt;</div><div class="line">    &lt;% &#125; %&gt;</div><div class="line">    // other content</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<p>渲染结果:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-content"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>hello ejs<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- other content --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="hexo-renderer-jade"><a href="#hexo-renderer-jade" class="headerlink" title="hexo-renderer-jade"></a>hexo-renderer-jade</h3><p>在jade中也许你可以这样:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//- item.title = &quot;hello jade&quot;</div><div class="line">.post-content</div><div class="line">    if item.title</div><div class="line">        h2= item.title</div><div class="line">    else </div><div class="line">        h2= theme.title</div><div class="line">    // other content</div></pre></td></tr></table></figure></p>
<p>渲染结果:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-content"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>hello jade<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- other content --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>如果你要定制属于你的Hexo主题，选择一个模版引擎是很重要的，关于ejs和jade我也不再细说，我们可以简单粗暴一些，对比一下它们在<a href="https://github.com/" target="_blank" rel="external">github</a>上的start吧!<br>另外Hexo官方提供的模版插件还有<a href="https://github.com/hexojs/hexo-renderer-haml" target="_blank" rel="external">Haml</a>和<a href="https://github.com/hexojs/hexo-renderer-swig" target="_blank" rel="external">Swig</a>, 其中Haml是基于Python的一款模版引擎，十分的简洁，jade会如此的简洁就是受到了它的影响。</p>
<h3 id="hexo-renderer-less-amp-amp-hexo-renderer-stylus"><a href="#hexo-renderer-less-amp-amp-hexo-renderer-stylus" class="headerlink" title="hexo-renderer-less &amp;&amp; hexo-renderer-stylus"></a>hexo-renderer-less &amp;&amp; hexo-renderer-stylus</h3><p>接下来就是css渲染插件了，Hexo官方提供的插件有<a href="https://github.com/hexojs/hexo-renderer-less" target="_blank" rel="external">Less</a> 和 <a href="https://github.com/hexojs/hexo-renderer-stylus" target="_blank" rel="external">Stylus</a>，这个就是纯粹因人而异了，看你熟悉哪一个了。不过这里有一个关于CSS与处理器的对比文章 =&gt; =&gt; =&gt; <a href="http://www.w3cplus.com/preprocessor/revisiting-css-preprocessors.html" target="_blank" rel="external">传送门</a></p>
<h2 id="Hexo-事三-hexo的生成器"><a href="#Hexo-事三-hexo的生成器" class="headerlink" title="Hexo 事三: hexo的生成器"></a>Hexo 事三: hexo的生成器</h2><p>以下是hexo的官方生成器，我们的博客就是由一个个的生成器来组成的：</p>
<ul>
<li><a href="https://github.com/hexojs/hexo-generator-index" target="_blank" rel="external">hexo-generator-index</a> - 主页(index.html)生成器</li>
<li><a href="https://github.com/hexojs/hexo-generator-archive" target="_blank" rel="external">hexo-generator-archive</a> - 文章页(archive/index.html)生成器</li>
<li><a href="https://github.com/hexojs/hexo-generator-alias" target="_blank" rel="external">hexo-generator-alias</a> - 别名(e.g: about/index.html)生成器</li>
<li><a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="external">hexo-generator-feed</a> - feed 生成器(暂时不清楚这个是干啊的。。。)</li>
<li><a href="https://github.com/hexojs/hexo-generator-tag" target="_blank" rel="external">hexo-generator-tag</a> - 标签页(tag/index.html)生成器</li>
<li><a href="https://github.com/hexojs/hexo-generator-category" target="_blank" rel="external">hexo-generator-category</a> -  分类页(category/index.html)生成器</li>
<li><a href="https://github.com/hexojs/hexo-generator-sitemap" target="_blank" rel="external">hexo-generator-sitemap</a> -  sitemap生成器</li>
</ul>
<p><img src="/images/hexo/hexo-generator.png" alt="hexo-generator"></p>
<h3 id="如何编写模版"><a href="#如何编写模版" class="headerlink" title="如何编写模版?"></a>如何编写模版?</h3><p>默认的在主题目录下会有<code>/layout</code>文件夹，里面会存在类似下面的目录结构:<br><img src="/images/hexo/jade.png" alt="jade模版文件结构"><br>我们可以看到在<code>/layout</code>下有2个文件夹<code>minxin</code>和<code>partial</code>，顾名思义，里面存放的是可复用的模版和页面能用到的公共模版。<br>当然你也可以看到有<code>index.jade</code>和<code>post.jade</code>这两个模版，它们分别代表的是渲染主页的模版<code>index.jade</code> =&gt; <code>index.html</code>和渲染文章页面的<code>post.jade</code> =&gt; <code>postname.html</code>，而这两个模版都继承了<code>partial/layout.jade</code>的基础模版<br><img src="/images/hexo/layout.png" alt="layout.jade"><br>所以整体的思路这里应该很清晰的，更具hexo的生成器来生成不同部分的页面，通过hexo提供的模版引擎和相应的<a href="https://hexo.io/zh-cn/" target="_blank" rel="external">变量</a>来编写不同的页面，报告主页模版／分类模版／标签模版和一些其他的模版。模版之间可复用的内容，比如说<code>DOCTYPE</code>,<code>head</code>,<code>footer</code>等可以通过继承一个<code>layout.jade/layout.ejs/layout.haml</code>等来完成。</p>
<p>Have fun! </p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>做一个小结，本文按照hexo基础知识 =&gt; hexo渲染器 =&gt; hexo生成器 来讲述hexo博客主题的基本组成结构，最后通过一个小的图例来说明如何编写一个Hexo theme，希望本篇文章能够对你有所帮助！<br>稍后我会将主题做一番修改，然后发布到github上面去，欢迎关注<a href="https://github.com/Simmer-Jun/" target="_blank" rel="external">我的github</a>，主题名为<code>grace</code>取优雅的意思，我希望这个主题能足够的优雅，让开发者能专注于内容。</p>
</div></article></div><div class="paginator clearfix"><a href="/2016/02/15/javascript/js-this/" class="prev">上一篇</a><a href="/2015/11/19/javascript/JavaScript－Puzzlers/" class="next">下一篇</a></div><div data-thread-key="/2015/12/24/other/hexo-theme/" data-title="Hexo 定制主题三两事" data-url="2015/12/24/other/hexo-theme/" class="ds-thread"><script type="text/javascript">var duoshuoQuery = {short_name: "simmer"};
(function() {
    var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
//- 多说公共JS代码                   </script></div></section><section class="footer"><p><a href="/about/index.html">Simmer</a> | Make it easy.
</p><div id="go-pg-top" style="display: none; opacity: 0.6;" title="返回顶部">TOP</div></section></div></div><script src="/js/jquery-1.11.1.js"></script><script src="/js/common.js"></script><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1257488449' class='cnzz'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1257488449%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script></body></html>