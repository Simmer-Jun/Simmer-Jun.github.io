<!DOCTYPE html><html class="no-js"><head><meta charset="utf-8"><title>司马-Simmer-React全家桶－初识组件(－)</title><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.icon"><link rel="stylesheet" href="/css/style.css"><!-- detech broser's env --><script src="/js/modernizr.js" type="text/javascript"></script><meta name="description" content="A Blog Powered By Hexo"></head><body><div class="nav clearfix"><div title="隐藏导航" id="nav-btn" class="nav-guide"><i class="icon nav-icon">&#xe603;</i></div><div class="nav-inner  clearfix "><a href="/" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe606;</div><span>Home</span></div></a><a href="/archives" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe602;</div><span>Archives</span></div></a><a href="/photography" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe604;</div><span>摄影</span></div></a><a href="/tags" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe601;</div><span>Tags</span></div></a><a href="/about" class="nav-item"><div class="nav-item-inner"><div class="icon">&#xe605;</div><span>About</span></div></a></div></div><div class="wraper"><div class="main"><section class="content"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2017/01/08/javascript/react/react-family-one/" class="post-title-link">React全家桶－初识组件(－)</a></h2><div class="post-subtitle clearfix"><span class="post-date">2017年1月8日</span><div class="post-tag"><a href="/2017/01/08/javascript/react/react-family-one/"><sapn>React</sapn><i class="icon">&#xe600;</i></a></div></div><div class="post-content"><img title="如何设计一个倒计时组件" src="http://oiwdpm2o1.bkt.clouddn.com/static/images/post-header/how-to-desion-react-countDown-component.jpg?imageView2/2/w/770">
<p>FaceBook在2013年发布了他们最新使用的前端库－<a href="https://facebook.github.io/react/" target="_blank" rel="noopener">React</a>。一个纯View的前端库，只关心View层次的逻辑，React和现有的mvc/mvvc框架（如Angular/vue）侧重点不同，前者侧重View层面的渲染，后者则像提供了一整套工具，更像一个系统。<br><a id="more"></a><br>最近组内项目在逐渐往React迁移，这里记录自己的学习React的过程，如有错误，请各位童鞋斧正。</p>
<p>初步的学习分享顺序会是：</p>
<ul>
<li>React基础API</li>
<li>React生命周期</li>
<li>React组件 </li>
<li>React组件之间的通信</li>
<li>搭配flux/Redux</li>
<li>React路由</li>
<li>React优化 </li>
<li>React项目构建</li>
</ul>
<p>希望自己能够坚持下来。</p>
<h2><span id="什么是组件">什么是组件</span></h2><p>组件（Component）是对数据和方法的简单封装，可以把它比作一个黑盒子，我们不用关心组件内部实现的具体细节，只需要关心组件暴露出的API(Application Programming Interface)。可以做一个比喻，那我们的智能手机来说，它是由一个个的元器件组成的，不同的元器件之间通过电路进行连接，元器件就相当于我们web页面中的组件，元器件之间的电路物理连接就是组件之间的API，通过将负责的智能手机拆分成一个个的元器件，然后不同的元器件由不同的厂商制作，在给出的元器件接口属性中，就可以被运用组成不同的电子产品。同理，web页面也可以由一个个组件组成。可以在不同的页面复用同一个组件。</p>
<h2><span id="有状态组件-vs-无状态组件">有状态组件 Vs 无状态组件</span></h2><p>在React中，每个组件都拥有状态，一些组件是纯view的组件，没有状态(<code>state</code>)的概念，例如下面的<code>ImgView</code>组件<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> React = <span class="built_in">require</span>(<span class="string">'react'</span>);</span><br><span class="line"><span class="keyword">var</span> ReactDOM = <span class="built_in">require</span>(<span class="string">'react-dom'</span>);</span><br><span class="line"><span class="keyword">var</span> ImgView = React.createClass(&#123;</span><br><span class="line">  render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;img src=&#123;<span class="keyword">this</span>.props.imgSrc&#125; alt=&#123;<span class="keyword">this</span>.props.imgAlt&#125; <span class="class"><span class="keyword">class</span></span>=<span class="string">"img"</span> /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">ImgView</span> <span class="attr">imgSrc</span>=<span class="string">"xxxx.jpg"</span> <span class="attr">alt</span>=<span class="string">"This is a image!"</span>/&gt;</span>, document.getElementById("wraper"));</span></span><br><span class="line"><span class="xml">&#125;);</span></span><br></pre></td></tr></table></figure></p>
<p>上面是兼容ES5浏览器语法，使用的是一种React专有的DSL语法－JSX，<code>render</code>函数中返回的就是组件的虚拟HTML结构，通过ReactDOM进行动态DOM渲染，其中的<code>imgSrc</code>和<code>alt</code>就是在实例化组件时传到组件内部的属性。<br>都2017年了大哥，ES6也来一套把？(ES6作为ES5的语法糖，用着确实还挺甜的org)<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line">Class ImgView extends React.Component &#123;</span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;this.props.imgSrc&#125;</span> <span class="attr">alt</span>=<span class="string">&#123;this.props.imgAlt&#125;</span> <span class="attr">class</span>=<span class="string">"img"</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line">ReactDOM.render(&lt;ImgView imgSrc="xxxx.jpg" alt="This is a image!"/&gt;, document.getElementById("wraper"));</span><br></pre></td></tr></table></figure></p>
<p>我们可以看到无状态组件很简单，就只需要按照传进来的参数进行相应的render就ok了。不过web应用中不都是这些纯view的组件，还有相当一部分组件需要拥有状态(<code>state</code>)。比如倒计时组件，这类组件，它不仅仅接受父组件传来的参数，而且本身就像一个状态机，状态会随着时间/用户的交互等发生变化，需要更新自身来响应这种变化。这类组件往往中间需要考虑的情况比无状态组件要多，可能父组件传来的Props发生变化就会引起它组件的状态变化。比如</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">componentWillRecieveProps: <span class="function"><span class="keyword">function</span>(<span class="params">nextProps</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">this</span>.props.id !== nextProps.id）&#123;<span class="comment">/*判断条件*/</span></span><br><span class="line">    <span class="keyword">this</span>.setState(newState); <span class="comment">//重新设置state</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>关于componentWillRecieveProps，这个是React组件的<a href="https://zhuanlan.zhihu.com/p/20312691?columnSlug=purerender" target="_blank" rel="noopener">生命周期函数</a>，通俗点来说就是钩子函数，能够让我们在组件在不同的情况下调用相关的函数以完成我们的要求。</p>
<h2><span id="小结">小结</span></h2><ul>
<li>在React中是由组件构成的世界</li>
<li>组件是一个相对独立的个体</li>
<li>组件分为有状态和无状态组件</li>
<li>state代表的是可变的数据，props代表的是相对不变的数据</li>
</ul>
</div></article></div><div class="paginator clearfix"><a href="/2017/01/13/javascript/klass-js-analyze/" class="prev">上一篇</a><a href="/2016/12/29/other/summary-about-2016/" class="next">下一篇</a></div></section><section class="footer"><div class="copyright">© 2015-2017 <a href="/about/index.html">Simmer</a> | Front-ender | Amateur photographer. </div><div id="go-pg-top" style="display: none; opacity: 0.6;" title="返回顶部">TOP</div></section></div></div><script src="/js/jquery-1.11.1.js"></script><script src="/js/common.js"></script><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1257488449' class='cnzz'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1257488449%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script></body></html>